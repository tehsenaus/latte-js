var Q = require("q");

function async(x) {
	var d = Q.defer();
	setTimeout(() => d.resolve(x), 100);
	return d.promise;
}

do {
	var x = "";
	
	var n = 5;
	while (<<async(n) > 0) {
		console.log(x);
		x += << async(n--);
	}

	console.log(x);
}
